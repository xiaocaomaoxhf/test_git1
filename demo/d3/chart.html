<!DOCTYPE HTML><html lang="en"><head>  <meta charset="UTF-8">  <title>Hello D3</title>  <script src="d3.js"></script>  <style>  </style></head><body><div id="line"></div><script>  function lineChart() {    var _chart = {};    var _x;    var _y;    var _data = [];    var _width = 600;    var _height = 300;    var _margin = {top:30,right:30,bottom:30,left:30};    var _svg;    var _bodyG;    var _colors = d3.scale.category10();    var _quadrantWidth = _width - _margin.left - _margin.right;    var _quadrantHeight = _height - _margin.top - _margin.bottom;    var _xStart = _margin.left;    var _xEnd = _width - _margin.right;    var _yStart = _height - _margin.bottom;    var _yEnd = _margin.top;    _chart.render = function() {      if(!_svg){        _svg = d3.select('body').append('svg')                .attr('width',_width)                .attr('height',_height);        renderAxes(_svg);      }      renderBody(_svg);    };    function renderAxes(svg){      var axesG = svg.append('g').classed('axes',true);      renderXAxis(axesG);      renderYAxis(axesG);      axesG.selectAll('g.tick line.grid-line')          .attr('fill','none')          .attr('stroke-width',1)          .attr('stroke','#000')          .attr('stroke-opacity','0.2')      axesG.selectAll('g.axes path.domain')          .attr('fill','none')          .attr('stroke-width',1)          .attr('stroke','#000')    }    function renderXAxis(axesG){      var xAxis = d3.svg.axis()          .scale(_x.range([0,_quadrantWidth]))          .orient('bottom');      axesG.append('g')          .classed('x axis',true)          .attr('transform', function(){            return 'translate('+ _xStart +', '+ _yStart +')';          })          .call(xAxis);      axesG.selectAll('g.x g.tick')          .append('line')          .classed('grid-line',true)          .attr('x0',0)          .attr('y0',0)          .attr('x1',0)          .attr('y1',-_quadrantHeight)    }    function renderYAxis(axesG){      var yAxis = d3.svg.axis()          .scale(_y.range([_quadrantHeight,0]))          .orient('left');      axesG.append('g')          .classed('y axis',true)          .attr('transform','translate('+ _xStart +','+ _yEnd +')')          .call(yAxis);      axesG.selectAll('g.y g.tick')          .append('line')          .classed('grid-line',true)          .attr('x0',0)          .attr('y0',0)          .attr('x1',_quadrantWidth)          .attr('y1',0)    }    function renderBody(svg){      if(!_bodyG){        _bodyG = svg.append('g')            .classed('body',true)            .attr('transform','translate('+ _xStart +','+ _yEnd +')')      }      renderLines();      renderDots();    }    function renderLines(){      var _line = d3.svg.line()          .x(function(d){return _x(d.x)})          .y(function(d){return _y(d.y)});      _bodyG.selectAll('path.line')          .data(_data)          .enter()          .append('path')          .style('stroke',function(d,i){            return _colors(i);          })          .attr('fill','none')          .classed('line',true)      _bodyG.selectAll('path.line')          .data(_data)          .transition()          .duration(300)          .attr('d', function(d){            return _line(d);          })    }    function renderDots(){      _data.forEach(function(list,i){        _bodyG.selectAll('circle._'+i)            .data(list)            .enter()            .append('circle')            .classed('dot _'+i,true);        _bodyG.selectAll('circle._'+i)            .data(list)            .style('stroke', function (d,i) {              return _colors(i);            })            .style('fill','#fff')            .transition()            .duration(300)            .attr('cx', function (d,i) {              return _x(d.x);            })            .attr('cy', function (d,i) {              return _y(d.y);            })            .attr('r',4.5);      })    }    _chart.addSeries = function(series){      _data.push(series);      return _chart;    };    _chart.x = function(x){      if(!arguments.length) return _x;      _x = x;      return _chart;    }    _chart.y = function(y){      if(!arguments.length) return _y;      _y = y;      return _chart;    }    return _chart;  }  function randomData() {    return Math.floor(Math.random()*9);  }  function update() {    for (var i = 0; i < data.length; ++i) {      var series = data[i];      series.length = 0;      for (var j = 0; j < numberOfDataPoint; ++j)        series.push({x: j, y: randomData()});    }    chart.render();  }  var numberOfSeries = 2;  var numberOfDataPoint = 11;  var data = [];  for (var i = 0; i < numberOfSeries; i++) {    data.push(d3.range(numberOfDataPoint).map(function(d,i) {      return {x:i,y:randomData()}    }))  }  var chart = lineChart().x(d3.scale.linear().domain([0,10])).y(d3.scale.linear().domain([0,10]));  data.forEach(function(series) {    chart.addSeries(series);    console.log(JSON.stringify(series))  })  chart.render(data);</script><button onclick="update()">Update</button></body>